
{
  "entities": {
    "FinancialAccount": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FinancialAccount",
      "type": "object",
      "description": "Represents a financial account (e.g., checking, savings, credit card).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the FinancialAccount entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N FinancialAccount)"
        },
        "accountName": {
          "type": "string",
          "description": "Name of the financial account (e.g., 'Checking Account', 'Visa Credit Card')."
        },
        "accountType": {
          "type": "string",
          "description": "Type of the financial account (e.g., 'checking', 'savings', 'credit_card')."
        },
        "institutionName": {
          "type": "string",
          "description": "Name of the financial institution holding the account (e.g., 'Bank of America', 'Chase')."
        },
        "balance": {
          "type": "number",
          "description": "Current balance of the financial account."
        },
        "currency": {
          "type": "string",
          "description": "Currency of the account balance (e.g., 'USD', 'EUR')."
        }
      },
      "required": [
        "id",
        "userId",
        "accountName",
        "accountType",
        "institutionName",
        "balance",
        "currency"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a single financial transaction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Transaction entity."
        },
        "accountId": {
          "type": "string",
          "description": "Reference to FinancialAccount. (Relationship: FinancialAccount 1:N Transaction)"
        },
        "transactionDate": {
          "type": "string",
          "description": "Date of the transaction.",
          "format": "date-time"
        },
        "description": {
          "type": "string",
          "description": "Description of the transaction."
        },
        "amount": {
          "type": "number",
          "description": "Amount of the transaction. Positive for credits, negative for debits."
        },
        "category": {
          "type": "string",
          "description": "Category of the transaction (e.g., 'food', 'transportation', 'entertainment')."
        },
        "notes": {
          "type": "string",
          "description": "Optional notes about the transaction."
        }
      },
      "required": [
        "id",
        "accountId",
        "transactionDate",
        "description",
        "amount",
        "category"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the piggybank application.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Display name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "googleSheetUrl": {
          "type": "string",
          "description": "URL of the user's Google Sheet for data import.",
          "format": "uri"
        }
      },
      "required": [
        "name",
        "googleSheetUrl"
      ]
    },
    "GoogleSheet": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GoogleSheet",
      "type": "object",
      "description": "Stores the URL and related information for a Google Sheet used for data import.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the GoogleSheet entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N GoogleSheet)"
        },
        "sheetUrl": {
          "type": "string",
          "description": "URL of the Google Sheet.",
          "format": "uri"
        },
        "lastImportDate": {
          "type": "string",
          "description": "Date and time of the last successful data import from the Google Sheet.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "sheetUrl"
      ]
    },
    "SpendingInsight": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SpendingInsight",
      "type": "object",
      "description": "Stores insights generated by the AI tool based on spending habits.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the SpendingInsight entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N SpendingInsight)"
        },
        "insightText": {
          "type": "string",
          "description": "The generated insight text."
        },
        "generatedDate": {
          "type": "string",
          "description": "Date and time when the insight was generated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "insightText",
        "generatedDate"
      ]
    },
     "PushSubscription": {
      "title": "PushSubscription",
      "type": "object",
      "description": "Represents a push notification subscription for a user's device.",
      "properties": {
        "token": {
          "type": "string",
          "description": "The unique push notification token for the device."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The date and time the subscription was created."
        }
      },
      "required": ["token", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profile information, including their name and Google Sheet URL."
    },
    "/users/{userId}/financialAccounts/{financialAccountId}": {
      "schema": {
        "$ref": "#/entities/FinancialAccount"
      },
      "description": "Stores financial account information for a specific user."
    },
    "/users/{userId}/financialAccounts/{financialAccountId}/transactions/{transactionId}": {
      "schema": {
        "$ref": "#/entities/Transaction"
      },
      "description": "Stores transaction information for a specific financial account of a user."
    },
    "/users/{userId}/googleSheets/{googleSheetId}": {
      "schema": {
        "$ref": "#/entities/GoogleSheet"
      },
      "description": "Stores Google Sheet URLs and import information for a specific user."
    },
    "/users/{userId}/spendingInsights/{spendingInsightId}": {
      "schema": {
        "$ref": "#/entities/SpendingInsight"
      },
      "description": "Stores spending insights generated for a specific user."
    },
    "/users/{userId}/pushSubscriptions/{subscriptionId}": {
      "schema": {
        "$ref": "#/entities/PushSubscription"
      },
      "description": "Stores push notification subscription tokens for a user's devices."
    }
  }
}

    